{"version":3,"file":"static/webpack/static/development/pages/campaigns/requests.js.9145ec074349d65f6691.hot-update.js","sources":["webpack:///./components/RequestRow.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Table, Button } from \"semantic-ui-react\";\nimport web3 from \"../ethereum/web3\";\nimport Campaign from \"../ethereum/campaign\";\n\nconst RequestRow = props => {\n  const [approveLoading, setApproveLoading] = useState(false);\n  const [finalizeLoading, setFinalizeLoading] = useState(false);\n  const [approveErrMsg, setApproveErrMsg] = useState(\"\");\n  const [finalizeErrMsg, setFinalizeErrMsg] = useState(\"\");\n  const { Row, Cell } = Table;\n  const { id, request, approversCount } = props;\n  const readyToFinalize = request.approvalCount > approversCount / 2;\n\n  const onApproveHandler = async () => {\n    const campaign = Campaign(props.address);\n    setApproveLoading(true);\n    setApproveErrMsg(\"\");\n    try {\n      const accounts = web3.eth.getAccounts();\n      await campaign.methods.approveRequest(props.id).send({\n        from: accounts[0]\n      });\n    } catch (err) {\n      setApproveErrMsg(err.message);\n    }\n    setApproveLoading(false);\n  };\n\n  const onFinalizeHandler = async () => {\n    const campaign = Campaign(props.address);\n    setFinalizeLoading(true);\n    setFinalizeErrMsg(\"\");\n    try {\n      const accounts = web3.eth.getAccounts();\n      await campaign.methods.finalizeRequest(props.id).send({\n        from: accounts[0]\n      });\n    } catch (err) {\n      setFinalizeErrMsg(err.message);\n    }\n    setFinalizeLoading(false);\n  };\n\n  return (\n    <Row\n      disabled={request.complete}\n      positive={readyToFinalize && !request.complete}\n    >\n      <Cell>{id}</Cell>\n      <Cell>{request.description}</Cell>\n      <Cell>{web3.utils.fromWei(request.value, \"ether\")}</Cell>\n      <Cell>{request.recipient}</Cell>\n      <Cell>{`${request.approvalCount}/${approversCount}`}</Cell>\n      <Cell>\n        {request.complete ? null : (\n          <>\n            <Button\n              loading={approveLoading}\n              basic\n              color=\"green\"\n              onClick={onApproveHandler}\n            >\n              Approve\n            </Button>\n            <p>{approveErrMsg}</p>\n          </>\n        )}\n      </Cell>\n      <Cell>\n        {request.complete ? null : (\n          <>\n            <Button\n              loading={finalizeLoading}\n              basic\n              color=\"teal\"\n              onClick={onFinalizeHandler}\n            >\n              Finalize\n            </Button>\n            <p>{finalizeErrMsg}</p>\n          </>\n        )}\n      </Cell>\n    </Row>\n  );\n};\n\nexport default RequestRow;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAKA;AALA;AAAA;AAOA;AADA;AACA;AAPA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAUA;AACA;AAXA;AAYA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAKA;AALA;AAAA;AAOA;AADA;AACA;AAPA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAUA;AACA;AAXA;AAYA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAcA;AAEA;AACA;AAFA;AAaA;AACA;AACA;AACA;AAJA;AAgBA;AACA;AACA;AACA;AAJA;AAcA;AACA;AACA;;;;A","sourceRoot":""}