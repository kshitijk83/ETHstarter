{"version":3,"file":"static/webpack/static/development/pages/campaigns/requests.js.918219c7c1cbaf95d77f.hot-update.js","sources":["webpack:///./pages/campaigns/requests/index.js"],"sourcesContent":["import React from \"react\";\nimport Layout from \"../../../components/Layout\";\nimport { Button, Table } from \"semantic-ui-react\";\nimport { Link } from \"../../../routes\";\nimport Campaign from \"../../../ethereum/campaign\";\nimport RequestRow from \"../../../components/RequestRow\";\n\nconst RequestIndex = props => {\n  const { Header, Row, HeaderCell, Body } = Table;\n\n  const renderRow = () => {\n    return props.requests.map((request, index) => {\n      return (\n        <RequestRow\n          key={index}\n          id={index}\n          approversCount={props.approversCount}\n          request={request}\n          address={props.address}\n        />\n      );\n    });\n  };\n\n  return (\n    <Layout>\n      <h3>Requests</h3>\n      <Link route={`/campaigns/${props.address}/requests/new`}>\n        <a>\n          <Button primary>Add Request</Button>\n        </a>\n      </Link>\n      <Table>\n        <Header>\n          <Row>\n            <HeaderCell>ID</HeaderCell>\n            <HeaderCell>Description</HeaderCell>\n            <HeaderCell>Amount</HeaderCell>\n            <HeaderCell>Recipient</HeaderCell>\n            <HeaderCell>Approval Count</HeaderCell>\n            <HeaderCell>Approve</HeaderCell>\n            <HeaderCell>Finalize</HeaderCell>\n          </Row>\n        </Header>\n        <Body>{renderRow()}</Body>\n      </Table>\n    </Layout>\n  );\n};\n\nRequestIndex.getInitialProps = async props => {\n  const { address } = props.query;\n  const campaign = Campaign(address);\n  const requestCount = await campaign.methods.getRequestsCount().call();\n  const approversCount = await campaign.methods.approversCount().call();\n  const requests = await Promise.all(\n    Array(parseInt(requestCount))\n      .fill()\n      .map((el, index) => campaign.methods.requests(index).call())\n  );\n  return { address, requests, requestCount, approversCount };\n};\n\nexport default RequestIndex;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AAGA;AAAA;AAEA;AAAA;AAmBA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AADA;AAGA;AAHA;AAAA;AACA;AADA;AAIA;AAJA;AAAA;AAQA;AAAA;AACA;AATA;AAKA;AALA;AAUA;AAAA;AAAA;AAAA;AAAA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAYA;;;;A","sourceRoot":""}