{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport { Form, Input, Message, Button } from \"semantic-ui-react\";\nimport Campaign from \"../ethereum/campaign\";\nimport web3 from \"../ethereum/web3\";\nimport { Router } from \"../routes\";\n\nvar ContributeForm = function ContributeForm(props) {\n  var _useState = useState(\"\"),\n      input = _useState[0],\n      setInput = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      errMsg = _useState2[0],\n      setErrMsg = _useState2[1];\n\n  var _useState3 = useState(false),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  var onSubmitHandler = function onSubmitHandler(event) {\n    var campaign, accounts;\n    return _regeneratorRuntime.async(function onSubmitHandler$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            event.preventDefault();\n            campaign = Campaign(props.address);\n            setLoading(true);\n            setErrMsg(\"\");\n            _context.prev = 4;\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(web3.eth.getAccounts());\n\n          case 7:\n            accounts = _context.sent;\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(campaign.methods.contribution().send({\n              from: accounts[0],\n              value: web3.utils.toWei(input, \"ether\")\n            }));\n\n          case 10:\n            Router.replaceRoute(\"/campaigns/\".concat(props.address));\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](4);\n            setErrMsg(_context.t0.message);\n\n          case 16:\n            setLoading(false);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[4, 13]]);\n  };\n\n  return __jsx(Form, {\n    error: !!errMsg,\n    onSubmit: onSubmitHandler\n  }, __jsx(Form.Field, null, __jsx(\"label\", null, \"Amount to Contribute\"), __jsx(Input, {\n    label: \"ether\",\n    labelPosition: \"right\",\n    value: input,\n    onChange: function onChange(event) {\n      return setInput(event.target.value);\n    }\n  })), __jsx(Message, {\n    error: true,\n    header: \"Oops!\",\n    content: errMsg\n  }), __jsx(Button, {\n    loading: loading,\n    primary: true,\n    type: \"submit\"\n  }, \"Contribute!\"));\n};\n\nexport default ContributeForm;","map":{"version":3,"sources":["/home/beast/Desktop/myGithub/kickstarter-ethereum/components/ContributeForm.js"],"names":["React","useState","Form","Input","Message","Button","Campaign","web3","Router","ContributeForm","props","input","setInput","errMsg","setErrMsg","loading","setLoading","onSubmitHandler","event","preventDefault","campaign","address","eth","getAccounts","accounts","methods","contribution","send","from","value","utils","toWei","replaceRoute","message","target"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,OAAtB,EAA+BC,MAA/B,QAA6C,mBAA7C;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,SAASC,MAAT,QAAuB,WAAvB;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,KAAK,EAAI;AAAA,kBACJT,QAAQ,CAAC,EAAD,CADJ;AAAA,MACvBU,KADuB;AAAA,MAChBC,QADgB;;AAAA,mBAEFX,QAAQ,CAAC,EAAD,CAFN;AAAA,MAEvBY,MAFuB;AAAA,MAEfC,SAFe;;AAAA,mBAGAb,QAAQ,CAAC,KAAD,CAHR;AAAA,MAGvBc,OAHuB;AAAA,MAGdC,UAHc;;AAK9B,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAMC,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACtBA,YAAAA,KAAK,CAACC,cAAN;AACMC,YAAAA,QAFgB,GAELd,QAAQ,CAACI,KAAK,CAACW,OAAP,CAFH;AAGtBL,YAAAA,UAAU,CAAC,IAAD,CAAV;AACAF,YAAAA,SAAS,CAAC,EAAD,CAAT;AAJsB;AAAA;AAAA,6CAMGP,IAAI,CAACe,GAAL,CAASC,WAAT,EANH;;AAAA;AAMdC,YAAAA,QANc;AAAA;AAAA,6CAOdJ,QAAQ,CAACK,OAAT,CAAiBC,YAAjB,GAAgCC,IAAhC,CAAqC;AACzCC,cAAAA,IAAI,EAAEJ,QAAQ,CAAC,CAAD,CAD2B;AAEzCK,cAAAA,KAAK,EAAEtB,IAAI,CAACuB,KAAL,CAAWC,KAAX,CAAiBpB,KAAjB,EAAwB,OAAxB;AAFkC,aAArC,CAPc;;AAAA;AAWpBH,YAAAA,MAAM,CAACwB,YAAP,sBAAkCtB,KAAK,CAACW,OAAxC;AAXoB;AAAA;;AAAA;AAAA;AAAA;AAapBP,YAAAA,SAAS,CAAC,YAAImB,OAAL,CAAT;;AAboB;AAetBjB,YAAAA,UAAU,CAAC,KAAD,CAAV;;AAfsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAxB;;AAkBA,SACE,MAAC,IAAD;AAAM,IAAA,KAAK,EAAE,CAAC,CAACH,MAAf;AAAuB,IAAA,QAAQ,EAAEI;AAAjC,KACE,MAAC,IAAD,CAAM,KAAN,QACE,4CADF,EAEE,MAAC,KAAD;AACE,IAAA,KAAK,EAAC,OADR;AAEE,IAAA,aAAa,EAAC,OAFhB;AAGE,IAAA,KAAK,EAAEN,KAHT;AAIE,IAAA,QAAQ,EAAE,kBAAAO,KAAK;AAAA,aAAIN,QAAQ,CAACM,KAAK,CAACgB,MAAN,CAAaL,KAAd,CAAZ;AAAA;AAJjB,IAFF,CADF,EAUE,MAAC,OAAD;AAAS,IAAA,KAAK,MAAd;AAAe,IAAA,MAAM,EAAC,OAAtB;AAA8B,IAAA,OAAO,EAAEhB;AAAvC,IAVF,EAWE,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAEE,OAAjB;AAA0B,IAAA,OAAO,MAAjC;AAAkC,IAAA,IAAI,EAAC;AAAvC,mBAXF,CADF;AAiBD,CAxCD;;AA0CA,eAAeN,cAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { Form, Input, Message, Button } from \"semantic-ui-react\";\nimport Campaign from \"../ethereum/campaign\";\nimport web3 from \"../ethereum/web3\";\nimport { Router } from \"../routes\";\n\nconst ContributeForm = props => {\n  const [input, setInput] = useState(\"\");\n  const [errMsg, setErrMsg] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const onSubmitHandler = async event => {\n    event.preventDefault();\n    const campaign = Campaign(props.address);\n    setLoading(true);\n    setErrMsg(\"\");\n    try {\n      const accounts = await web3.eth.getAccounts();\n      await campaign.methods.contribution().send({\n        from: accounts[0],\n        value: web3.utils.toWei(input, \"ether\")\n      });\n      Router.replaceRoute(`/campaigns/${props.address}`);\n    } catch (err) {\n      setErrMsg(err.message);\n    }\n    setLoading(false);\n  };\n\n  return (\n    <Form error={!!errMsg} onSubmit={onSubmitHandler}>\n      <Form.Field>\n        <label>Amount to Contribute</label>\n        <Input\n          label=\"ether\"\n          labelPosition=\"right\"\n          value={input}\n          onChange={event => setInput(event.target.value)}\n        />\n      </Form.Field>\n      <Message error header=\"Oops!\" content={errMsg} />\n      <Button loading={loading} primary type=\"submit\">\n        Contribute!\n      </Button>\n    </Form>\n  );\n};\n\nexport default ContributeForm;\n"]},"metadata":{},"sourceType":"module"}