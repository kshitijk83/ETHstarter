{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Layout from \"../../../components/Layout\";\nimport { Button, Table } from \"semantic-ui-react\";\nimport { Link } from \"../../../routes\";\nimport Campaign from \"../../../ethereum/campaign\";\nimport RequestRow from \"../../../components/RequestRow\";\n\nconst RequestIndex = props => {\n  const {\n    Header,\n    Row,\n    HeaderCell,\n    Body\n  } = Table;\n\n  const renderRow = () => {\n    return props.requests.map((request, index) => {\n      return __jsx(RequestRow, {\n        key: index,\n        id: index,\n        request: request,\n        address: props.address\n      });\n    });\n  };\n\n  return __jsx(Layout, null, __jsx(\"h3\", null, \"Requests\"), __jsx(Link, {\n    route: `/campaigns/${props.address}/requests/new`\n  }, __jsx(\"a\", null, __jsx(Button, {\n    primary: true\n  }, \"Add Request\"))), __jsx(Table, null, __jsx(Header, null, __jsx(HeaderCell, null, \"ID\"), __jsx(HeaderCell, null, \"Description\"), __jsx(HeaderCell, null, \"Amount\"), __jsx(HeaderCell, null, \"Recipient\"), __jsx(HeaderCell, null, \"Approval Count\"), __jsx(HeaderCell, null, \"Finalize\")), __jsx(Body, null, renderRow())));\n};\n\nRequestIndex.getInitialProps = async props => {\n  const {\n    address\n  } = props.query;\n  const campaign = Campaign(address);\n  const requestCount = await campaign.methods.getRequestsCount().call();\n  const requests = await _Promise.all(Array(_parseInt(requestCount)).fill().map((el, index) => campaign.methods.requests(index).call()));\n  return {\n    address,\n    requests,\n    requestCount\n  };\n};\n\nexport default RequestIndex;","map":{"version":3,"sources":["/home/beast/Desktop/myGithub/kickstarter-ethereum/pages/campaigns/requests/index.js"],"names":["React","Layout","Button","Table","Link","Campaign","RequestRow","RequestIndex","props","Header","Row","HeaderCell","Body","renderRow","requests","map","request","index","address","getInitialProps","query","campaign","requestCount","methods","getRequestsCount","call","all","Array","fill","el"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,SAASC,MAAT,EAAiBC,KAAjB,QAA8B,mBAA9B;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,UAAP,MAAuB,gCAAvB;;AAEA,MAAMC,YAAY,GAAGC,KAAK,IAAI;AAC5B,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,GAAV;AAAeC,IAAAA,UAAf;AAA2BC,IAAAA;AAA3B,MAAoCT,KAA1C;;AAEA,QAAMU,SAAS,GAAG,MAAM;AACtB,WAAOL,KAAK,CAACM,QAAN,CAAeC,GAAf,CAAmB,CAACC,OAAD,EAAUC,KAAV,KAAoB;AAC5C,aACE,MAAC,UAAD;AACE,QAAA,GAAG,EAAEA,KADP;AAEE,QAAA,EAAE,EAAEA,KAFN;AAGE,QAAA,OAAO,EAAED,OAHX;AAIE,QAAA,OAAO,EAAER,KAAK,CAACU;AAJjB,QADF;AAQD,KATM,CAAP;AAUD,GAXD;;AAaA,SACE,MAAC,MAAD,QACE,6BADF,EAEE,MAAC,IAAD;AAAM,IAAA,KAAK,EAAG,cAAaV,KAAK,CAACU,OAAQ;AAAzC,KACE,iBACE,MAAC,MAAD;AAAQ,IAAA,OAAO;AAAf,mBADF,CADF,CAFF,EAOE,MAAC,KAAD,QACE,MAAC,MAAD,QACE,MAAC,UAAD,aADF,EAEE,MAAC,UAAD,sBAFF,EAGE,MAAC,UAAD,iBAHF,EAIE,MAAC,UAAD,oBAJF,EAKE,MAAC,UAAD,yBALF,EAME,MAAC,UAAD,mBANF,CADF,EASE,MAAC,IAAD,QAAOL,SAAS,EAAhB,CATF,CAPF,CADF;AAqBD,CArCD;;AAuCAN,YAAY,CAACY,eAAb,GAA+B,MAAMX,KAAN,IAAe;AAC5C,QAAM;AAAEU,IAAAA;AAAF,MAAcV,KAAK,CAACY,KAA1B;AACA,QAAMC,QAAQ,GAAGhB,QAAQ,CAACa,OAAD,CAAzB;AACA,QAAMI,YAAY,GAAG,MAAMD,QAAQ,CAACE,OAAT,CAAiBC,gBAAjB,GAAoCC,IAApC,EAA3B;AACA,QAAMX,QAAQ,GAAG,MAAM,SAAQY,GAAR,CACrBC,KAAK,CAAC,UAASL,YAAT,CAAD,CAAL,CACGM,IADH,GAEGb,GAFH,CAEO,CAACc,EAAD,EAAKZ,KAAL,KAAeI,QAAQ,CAACE,OAAT,CAAiBT,QAAjB,CAA0BG,KAA1B,EAAiCQ,IAAjC,EAFtB,CADqB,CAAvB;AAKA,SAAO;AAAEP,IAAAA,OAAF;AAAWJ,IAAAA,QAAX;AAAqBQ,IAAAA;AAArB,GAAP;AACD,CAVD;;AAYA,eAAef,YAAf","sourcesContent":["import React from \"react\";\nimport Layout from \"../../../components/Layout\";\nimport { Button, Table } from \"semantic-ui-react\";\nimport { Link } from \"../../../routes\";\nimport Campaign from \"../../../ethereum/campaign\";\nimport RequestRow from \"../../../components/RequestRow\";\n\nconst RequestIndex = props => {\n  const { Header, Row, HeaderCell, Body } = Table;\n\n  const renderRow = () => {\n    return props.requests.map((request, index) => {\n      return (\n        <RequestRow\n          key={index}\n          id={index}\n          request={request}\n          address={props.address}\n        />\n      );\n    });\n  };\n\n  return (\n    <Layout>\n      <h3>Requests</h3>\n      <Link route={`/campaigns/${props.address}/requests/new`}>\n        <a>\n          <Button primary>Add Request</Button>\n        </a>\n      </Link>\n      <Table>\n        <Header>\n          <HeaderCell>ID</HeaderCell>\n          <HeaderCell>Description</HeaderCell>\n          <HeaderCell>Amount</HeaderCell>\n          <HeaderCell>Recipient</HeaderCell>\n          <HeaderCell>Approval Count</HeaderCell>\n          <HeaderCell>Finalize</HeaderCell>\n        </Header>\n        <Body>{renderRow()}</Body>\n      </Table>\n    </Layout>\n  );\n};\n\nRequestIndex.getInitialProps = async props => {\n  const { address } = props.query;\n  const campaign = Campaign(address);\n  const requestCount = await campaign.methods.getRequestsCount().call();\n  const requests = await Promise.all(\n    Array(parseInt(requestCount))\n      .fill()\n      .map((el, index) => campaign.methods.requests(index).call())\n  );\n  return { address, requests, requestCount };\n};\n\nexport default RequestIndex;\n"]},"metadata":{},"sourceType":"module"}