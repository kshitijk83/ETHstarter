{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport { Table, Button } from \"semantic-ui-react\";\nimport web3 from \"../ethereum/web3\";\nimport Campaign from \"../ethereum/campaign\";\n\nvar RequestRow = function RequestRow(props) {\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var Row = Table.Row,\n      Cell = Table.Cell;\n  var id = props.id,\n      request = props.request,\n      approversCount = props.approversCount;\n\n  var onApproveHandler = function onApproveHandler() {\n    var campaign, accounts;\n    return _regeneratorRuntime.async(function onApproveHandler$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            campaign = Campaign(props.address);\n            setLoading(true);\n            _context.prev = 2;\n            accounts = web3.eth.getAccounts();\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(campaign.methods.approveRequest(props.id).send({\n              from: accounts[0]\n            }));\n\n          case 6:\n            _context.next = 10;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](2);\n\n          case 10:\n            setLoading(false);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[2, 8]]);\n  };\n\n  var onFinalizeHandler = function onFinalizeHandler() {\n    var campaign, accounts;\n    return _regeneratorRuntime.async(function onFinalizeHandler$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            campaign = Campaign(props.address);\n            setLoading(true);\n            _context2.prev = 2;\n            accounts = web3.eth.getAccounts();\n            _context2.next = 6;\n            return _regeneratorRuntime.awrap(campaign.methods.finalizeRequest(props.id).send({\n              from: accounts[0]\n            }));\n\n          case 6:\n            _context2.next = 10;\n            break;\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](2);\n\n          case 10:\n            setLoading(false);\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[2, 8]]);\n  };\n\n  return __jsx(Row, null, __jsx(Cell, null, id), __jsx(Cell, null, request.description), __jsx(Cell, null, web3.utils.fromWei(request.value, \"ether\")), __jsx(Cell, null, request.recipient), __jsx(Cell, null, \"\".concat(request.approvalCount, \"/\").concat(approversCount)), __jsx(Cell, null, request.complete ? null : __jsx(Button, {\n    basic: true,\n    color: \"green\",\n    onClick: onApproveHandler\n  }, \"Approve\")), __jsx(Cell, null, __jsx(Button, {\n    basic: true,\n    color: \"teal\",\n    onClick: onFinalizeHandler\n  }, \"Finalize\")));\n};\n\nexport default RequestRow;","map":{"version":3,"sources":["/home/beast/Desktop/myGithub/kickstarter-ethereum/components/RequestRow.js"],"names":["React","useState","Table","Button","web3","Campaign","RequestRow","props","loading","setLoading","Row","Cell","id","request","approversCount","onApproveHandler","campaign","address","accounts","eth","getAccounts","methods","approveRequest","send","from","onFinalizeHandler","finalizeRequest","description","utils","fromWei","value","recipient","approvalCount","complete"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Table, Button } from \"semantic-ui-react\";\nimport web3 from \"../ethereum/web3\";\nimport Campaign from \"../ethereum/campaign\";\n\nconst RequestRow = props => {\n  const [loading, setLoading] = useState(false);\n  const { Row, Cell } = Table;\n  const { id, request, approversCount } = props;\n\n  const onApproveHandler = async () => {\n    const campaign = Campaign(props.address);\n    setLoading(true);\n    try {\n      const accounts = web3.eth.getAccounts();\n      await campaign.methods.approveRequest(props.id).send({\n        from: accounts[0]\n      });\n    } catch (err) {}\n    setLoading(false);\n  };\n\n  const onFinalizeHandler = async () => {\n    const campaign = Campaign(props.address);\n    setLoading(true);\n    try {\n      const accounts = web3.eth.getAccounts();\n      await campaign.methods.finalizeRequest(props.id).send({\n        from: accounts[0]\n      });\n    } catch (err) {}\n    setLoading(false);\n  };\n\n  return (\n    <Row>\n      <Cell>{id}</Cell>\n      <Cell>{request.description}</Cell>\n      <Cell>{web3.utils.fromWei(request.value, \"ether\")}</Cell>\n      <Cell>{request.recipient}</Cell>\n      <Cell>{`${request.approvalCount}/${approversCount}`}</Cell>\n      <Cell>\n        {request.complete ? null : (\n          <Button basic color=\"green\" onClick={onApproveHandler}>\n            Approve\n          </Button>\n        )}\n      </Cell>\n      <Cell>\n        <Button basic color=\"teal\" onClick={onFinalizeHandler}>\n          Finalize\n        </Button>\n      </Cell>\n    </Row>\n  );\n};\n\nexport default RequestRow;\n"]},"metadata":{},"sourceType":"module"}