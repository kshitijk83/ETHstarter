{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport Campaign from \"../../../ethereum/campaign\";\nimport web3 from \"../../../ethereum/web3\";\nimport Layout from \"../../../components/Layout\";\nimport { Form, Input, Button, Message } from \"semantic-ui-react\";\nimport { Link, Router } from \"../../../routes\";\n\nvar RequestNew = function RequestNew(props) {\n  var _useState = useState(\"\"),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      description = _useState2[0],\n      setDescription = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      recipient = _useState3[0],\n      setRecipient = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      errMsg = _useState4[0],\n      setErrMsg = _useState4[1];\n\n  var _useState5 = useState(false),\n      loading = _useState5[0],\n      setLoading = _useState5[1];\n\n  var onSubmitHandler = function onSubmitHandler(event) {\n    var campaign, accounts;\n    return _regeneratorRuntime.async(function onSubmitHandler$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            event.preventDefault();\n            campaign = Campaign(props.address);\n            setLoading(true);\n            setErrMsg(\"\");\n            _context.prev = 4;\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(web3.eth.getAccounts());\n\n          case 7:\n            accounts = _context.sent;\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(campaign.methods.createRequest(description, web3.utils.toWei(value, \"ether\"), recipient).send({\n              from: accounts[0]\n            }));\n\n          case 10:\n            Router.pushRoute(\"/campaigns/\".concat(props.address, \"/requests\"));\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](4);\n            setErrMsg(_context.t0.message);\n\n          case 16:\n            setLoading(false);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[4, 13]]);\n  };\n\n  return __jsx(Layout, null, __jsx(Link, {\n    route: \"/campaigns/\".concat(props.address, \"/requests\")\n  }, __jsx(\"a\", null, \"Back\")), __jsx(\"h3\", null, \"Create A Request\"), __jsx(Form, {\n    error: !!errMsg,\n    onSubmit: onSubmitHandler\n  }, __jsx(Form.Field, null, __jsx(\"label\", null, \"Description\"), __jsx(Input, {\n    value: description,\n    onChange: function onChange(event) {\n      return setDescription(event.target.value);\n    }\n  })), __jsx(Form.Field, null, __jsx(\"label\", null, \"Value in Ether\"), __jsx(Input, {\n    value: value,\n    onChange: function onChange(event) {\n      return setValue(event.target.value);\n    }\n  })), __jsx(Form.Field, null, __jsx(\"label\", null, \"recipient\"), __jsx(Input, {\n    value: recipient,\n    onChange: function onChange(event) {\n      return setRecipient(event.target.value);\n    }\n  })), __jsx(Message, {\n    error: true,\n    header: \"Oops!\",\n    content: errMsg\n  }), __jsx(Button, {\n    loading: loading,\n    type: \"submit\",\n    primary: true\n  }, \"Create!\")));\n};\n\nRequestNew.getInitialProps = function _callee(props) {\n  return _regeneratorRuntime.async(function _callee$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          return _context2.abrupt(\"return\", {\n            address: props.query.address\n          });\n\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n};\n\nexport default RequestNew;","map":{"version":3,"sources":["/home/beast/Desktop/myGithub/kickstarter-ethereum/pages/campaigns/requests/new.js"],"names":["React","useState","Campaign","web3","Layout","Form","Input","Button","Message","Link","Router","RequestNew","props","value","setValue","description","setDescription","recipient","setRecipient","errMsg","setErrMsg","loading","setLoading","onSubmitHandler","event","preventDefault","campaign","address","eth","getAccounts","accounts","methods","createRequest","utils","toWei","send","from","pushRoute","message","target","getInitialProps","query"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Campaign from \"../../../ethereum/campaign\";\nimport web3 from \"../../../ethereum/web3\";\nimport Layout from \"../../../components/Layout\";\nimport { Form, Input, Button, Message } from \"semantic-ui-react\";\nimport { Link, Router } from \"../../../routes\";\n\nconst RequestNew = props => {\n  const [value, setValue] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [recipient, setRecipient] = useState(\"\");\n  const [errMsg, setErrMsg] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const onSubmitHandler = async event => {\n    event.preventDefault();\n    const campaign = Campaign(props.address);\n    setLoading(true);\n    setErrMsg(\"\");\n    try {\n      const accounts = await web3.eth.getAccounts();\n      await campaign.methods\n        .createRequest(description, web3.utils.toWei(value, \"ether\"), recipient)\n        .send({ from: accounts[0] });\n      Router.pushRoute(`/campaigns/${props.address}/requests`);\n    } catch (err) {\n      setErrMsg(err.message);\n    }\n    setLoading(false);\n  };\n\n  return (\n    <Layout>\n      <Link route={`/campaigns/${props.address}/requests`}>\n        <a>Back</a>\n      </Link>\n      <h3>Create A Request</h3>\n      <Form error={!!errMsg} onSubmit={onSubmitHandler}>\n        <Form.Field>\n          <label>Description</label>\n          <Input\n            value={description}\n            onChange={event => setDescription(event.target.value)}\n          />\n        </Form.Field>\n        <Form.Field>\n          <label>Value in Ether</label>\n          <Input\n            value={value}\n            onChange={event => setValue(event.target.value)}\n          />\n        </Form.Field>\n        <Form.Field>\n          <label>recipient</label>\n          <Input\n            value={recipient}\n            onChange={event => setRecipient(event.target.value)}\n          />\n        </Form.Field>\n        <Message error header=\"Oops!\" content={errMsg} />\n        <Button loading={loading} type=\"submit\" primary>\n          Create!\n        </Button>\n      </Form>\n    </Layout>\n  );\n};\n\nRequestNew.getInitialProps = async props => {\n  return { address: props.query.address };\n};\n\nexport default RequestNew;\n"]},"metadata":{},"sourceType":"module"}